<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Movie Night for Mi Amor</title>

  <style>
    body {
      font-family: system-ui, Segoe UI, Arial, sans-serif;
      margin: 0;
      color: #f5f5f7;
    }

    .bgvid {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: -2;
    }

    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.45);
      z-index: -1;
    }

    /* Clickable area for an easter egg, subtle and invisible */
    .easter-area {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      height: 28vh;
      z-index: 0;
      cursor: default;
    }

    .wrap {
      max-width: 920px;
      margin: 0 auto;
      padding: 32px 18px 64px;
      position: relative;
      z-index: 1;
    }

    .card {
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.18);
      border-radius: 20px;
      padding: 24px;
      backdrop-filter: blur(4px);
    }

    h1 {
      font-size: 36px;
      margin: 0 0 10px;
      cursor: pointer;
      user-select: none;
    }

    h2 {
      margin: 22px 0 10px;
    }

    .sub {
      opacity: 0.9;
      margin-bottom: 18px;
    }

    .grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 14px;
    }

    @media (min-width: 720px) {
      .grid { grid-template-columns: 1fr 1fr; }
    }

    .pill {
      display: inline-block;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,0.12);
      border: 1px solid rgba(255,255,255,0.22);
      margin-bottom: 8px;
      font-weight: 600;
    }

    .row {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      margin-top: 14px;
      align-items: center;
    }

    button {
      cursor: pointer;
      border-radius: 14px;
      padding: 12px 16px;
      font-weight: 650;
      border: none;
    }

    .btn {
      background: #b11226;
      color: #fff;
    }

    .btn2 {
      background: rgba(255,255,255,0.15);
      color: #fff;
      border: 1px solid rgba(255,255,255,0.25);
    }

    input {
      width: 100%;
      padding: 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.25);
      background: rgba(255,255,255,0.08);
      color: #fff;
      font-size: 16px;
    }

    .small {
      opacity: 0.8;
      font-size: 13px;
      margin-top: 10px;
    }

    .hidden { display: none; }

    .ok { color: #9bffb2; font-weight: 650; }
    .err { color: #ff9a9a; font-weight: 650; }

    hr {
      border: 0;
      border-top: 1px solid rgba(255,255,255,0.25);
      margin: 20px 0;
    }

    .topbar {
      display: flex;
      justify-content: flex-end;
      margin-bottom: 12px;
      gap: 10px;
      flex-wrap: wrap;
    }

    /* Modal (used for the soft message, hug, and easter eggs) */
    .modal {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 18px;
      z-index: 60;
    }

    .modal.show { display: flex; }

    .modal-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.55);
      backdrop-filter: blur(3px);
      opacity: 0;
      animation: fadeIn 260ms ease forwards;
    }

    .modal-card {
      position: relative;
      max-width: 720px;
      width: 100%;
      background: rgba(255,255,255,0.10);
      border: 1px solid rgba(255,255,255,0.22);
      border-radius: 20px;
      padding: 18px 18px 16px;
      transform: translateY(10px);
      opacity: 0;
      animation: popIn 320ms ease forwards;
    }

    .modal-title {
      font-size: 22px;
      margin: 0 0 8px;
    }

    .modal-text {
      margin: 0 0 12px;
      opacity: 0.92;
      line-height: 1.45;
    }

    @keyframes fadeIn { to { opacity: 1; } }
    @keyframes popIn { to { transform: translateY(0); opacity: 1; } }

    /* Cozy checklist */
    .checklist {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-top: 10px;
    }
    @media (min-width: 720px) {
      .checklist { grid-template-columns: 1fr 1fr; }
    }
    .check-item {
      display: flex;
      gap: 10px;
      align-items: flex-start;
      padding: 12px;
      border-radius: 16px;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.14);
      cursor: pointer;
      user-select: none;
    }
    .check-item input {
      width: 18px;
      height: 18px;
      margin-top: 2px;
    }
    .check-item .label {
      line-height: 1.3;
      opacity: 0.95;
    }
    .check-item.done .label {
      opacity: 0.75;
      text-decoration: line-through;
    }

    /* Photo gallery */
    .gallery {
      margin-top: 10px;
    }
    .gallery-frame {
      position: relative;
      border-radius: 18px;
      overflow: hidden;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.14);
    }
    .gallery-img {
      width: 100%;
      height: 420px;
      object-fit: cover;
      display: block;
    }
    @media (max-width: 720px) {
      .gallery-img { height: 320px; }
    }
    .gallery-controls {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      margin-top: 10px;
      flex-wrap: wrap;
    }
    .gallery-caption {
      margin-top: 10px;
      opacity: 0.9;
    }
    .dots {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
      margin-top: 10px;
    }
    .dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      border: 1px solid rgba(255,255,255,0.35);
      background: rgba(255,255,255,0.12);
      cursor: pointer;
    }
    .dot.active {
      background: rgba(255,255,255,0.85);
    }

    /* Small toast message */
    .toast {
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      background: rgba(0,0,0,0.55);
      border: 1px solid rgba(255,255,255,0.22);
      color: #fff;
      padding: 10px 12px;
      border-radius: 14px;
      opacity: 0;
      pointer-events: none;
      z-index: 70;
      transition: opacity 220ms ease;
      max-width: 92vw;
    }
    .toast.show { opacity: 1; }
  </style>
</head>

<body>
  <video class="bgvid" autoplay muted loop playsinline>
    <source src="fireplace.mp4" type="video/mp4">
  </video>
  <div class="overlay"></div>

  <!-- Invisible easter egg click zone over the lower portion of the fireplace -->
  <div class="easter-area" onclick="showEasterEgg('fireplace')"></div>

  <audio id="bgm" preload="auto" loop>
    <source src="song.mp3" type="audio/mpeg">
  </audio>

  <!-- Reusable modal -->
  <div id="modal" class="modal" aria-hidden="true">
    <div class="modal-backdrop" onclick="closeModal()"></div>
    <div class="modal-card" role="dialog" aria-modal="true" aria-label="Message">
      <p class="modal-title" id="modalTitle">Message</p>
      <p class="modal-text" id="modalText">...</p>
      <div class="row">
        <button class="btn" onclick="closeModal()">Okay</button>
        <button class="btn2" onclick="toggleMusic()">Music On/Off</button>
      </div>
      <p class="small" style="margin:10px 0 0;">Tip: tap outside this box to close.</p>
    </div>
  </div>

  <div id="toast" class="toast"></div>

  <div class="wrap">
    <div class="topbar">
      <button id="musicBtn" class="btn2" onclick="toggleMusic()">Music: Off</button>
      <button class="btn2" onclick="hug()">I need a hug</button>
    </div>

    <div class="card">
      <h1 onclick="showEasterEgg('title')">Movie Night for mi amor</h1>
      <p class="sub">Cozy night by the fire, just you and me. Tonight is for you.</p>

      <div class="lockbox">
        <p>Enter the secret code from your movie ticket, mi amor:</p>
        <input id="code" placeholder="Type the code here" autocomplete="off">
        <div class="row">
          <button class="btn" onclick="unlock()">Unlock</button>
          <button class="btn2" onclick="hint()">Need a hint</button>
        </div>
        <p id="status" class="small"></p>
      </div>

      <div id="content" class="hidden">
        <hr>

        <h2>Tonight‚Äôs plan</h2>
        <div class="grid">
          <div class="card">
            <div class="pill">Step 1</div>
            <p>You pick the movie, whatever you desire, my love.</p>
          </div>
          <div class="card">
            <div class="pill">Step 2</div>
            <p>Blankets, cozy clothes or pajamas, fireplace vibes, dim the lights.</p>
          </div>
          <div class="card">
            <div class="pill">Step 3</div>
            <p>Popcorn, snacks, and refills handled by me. I promise to pause the movie.</p>
          </div>
          <div class="card">
            <div class="pill">Step 4</div>
            <p>Wine, cheese, and snacks. Cheers to us, siempre.</p>
          </div>
        </div>

        <h2>Cozy checklist</h2>
        <div class="checklist" id="checklist"></div>
        <div class="row">
          <button class="btn2" onclick="resetChecklist()">Reset checklist</button>
          <button class="btn2" onclick="showEasterEgg('random')">Tiny surprise</button>
        </div>

        <h2>Us</h2>
        <div class="gallery">
          <div class="gallery-frame">
            <img id="galleryImg" class="gallery-img" src="p01.jpg" alt="Photo memory">
          </div>

          <div class="gallery-controls">
            <button class="btn2" onclick="prevPhoto()">Previous</button>
            <button class="btn2" onclick="nextPhoto()">Next</button>
          </div>

          <div class="dots" id="dots"></div>
          <p class="gallery-caption" id="galleryCaption"></p>
          <p class="small">Tip: add photos named p01.jpg through p15.jpg in this same repo.</p>
        </div>

        <h2>A note for you</h2>
        <div class="card">
          <p>
            Mi amor, I love you. Thank you for everything you do and for making our home feel warm,
            safe, and full of love. Tonight is simple, relax, laugh, and let me spoil you a little.
          </p>
          <p style="margin-top:12px; opacity:0.9;">Love you always, Hubby</p>
        </div>

        <div class="row">
          <button class="btn" onclick="startNight()">Start movie night</button>
          <button class="btn2" onclick="window.print()">Print this page</button>
        </div>

        <p class="small">Feliz Navidad ‚ù§Ô∏è</p>
      </div>
    </div>
  </div>

  <script>
    const SECRET = "NAVIDADCONMIAMOR";

    const bgm = document.getElementById("bgm");
    const musicBtn = document.getElementById("musicBtn");
    const modal = document.getElementById("modal");
    const modalTitle = document.getElementById("modalTitle");
    const modalText = document.getElementById("modalText");
    const toast = document.getElementById("toast");

    let musicOn = false;

    // Option 3: Cozy checklist
    const checklistItems = [
      { id: "blankets", text: "Blankets ready" },
      { id: "cozy", text: "Cozy clothes or pajamas on" },
      { id: "lights", text: "Lights dimmed" },
      { id: "snacks", text: "Snacks set out" },
      { id: "popcorn", text: "Popcorn ready" },
      { id: "wine", text: "Wine poured, cheese ready" },
      { id: "phones", text: "Phones on silent" },
      { id: "pause", text: "Promise to pause the movie for refills" }
    ];

    function loadChecklistState() {
      try {
        const saved = localStorage.getItem("movieNightChecklist");
        return saved ? JSON.parse(saved) : {};
      } catch {
        return {};
      }
    }

    function saveChecklistState(state) {
      try {
        localStorage.setItem("movieNightChecklist", JSON.stringify(state));
      } catch {}
    }

    function renderChecklist() {
      const state = loadChecklistState();
      const el = document.getElementById("checklist");
      el.innerHTML = "";

      checklistItems.forEach(item => {
        const wrapper = document.createElement("div");
        wrapper.className = "check-item" + (state[item.id] ? " done" : "");
        wrapper.onclick = () => toggleChecklist(item.id);

        const cb = document.createElement("input");
        cb.type = "checkbox";
        cb.checked = !!state[item.id];
        cb.onclick = (e) => e.stopPropagation();

        const label = document.createElement("div");
        label.className = "label";
        label.textContent = item.text;

        wrapper.appendChild(cb);
        wrapper.appendChild(label);
        el.appendChild(wrapper);
      });
    }

    function toggleChecklist(id) {
      const state = loadChecklistState();
      state[id] = !state[id];
      saveChecklistState(state);
      renderChecklist();
    }

    function resetChecklist() {
      saveChecklistState({});
      renderChecklist();
      showToast("Checklist reset.");
    }

    // Option 5: Photo gallery (15 pictures)
    const photos = [
      { src: "p01.jpg", caption: "One of my favorite moments with you." },
      { src: "p02.jpg", caption: "Us, doing life together." },
      { src: "p03.jpg", caption: "My love." },
      { src: "p04.jpg", caption: "Always my favorite view." },
      { src: "p05.jpg", caption: "This one makes me smile." },
      { src: "p06.jpg", caption: "You and me." },
      { src: "p07.jpg", caption: "Mi amor." },
      { src: "p08.jpg", caption: "My person." },
      { src: "p09.jpg", caption: "Forever vibes." },
      { src: "p10.jpg", caption: "I love our story." },
      { src: "p11.jpg", caption: "Best memories are with you." },
      { src: "p12.jpg", caption: "Still choosing you." },
      { src: "p13.jpg", caption: "My safe place." },
      { src: "p14.jpg", caption: "You make everything better." },
      { src: "p15.jpg", caption: "Cheers to us, siempre." }
    ];

    let photoIndex = 0;

    function buildDots() {
      const dots = document.getElementById("dots");
      dots.innerHTML = "";
      photos.forEach((_, i) => {
        const d = document.createElement("div");
        d.className = "dot" + (i === photoIndex ? " active" : "");
        d.onclick = () => goToPhoto(i);
        dots.appendChild(d);
      });
    }

    function renderPhoto() {
      const img = document.getElementById("galleryImg");
      const caption = document.getElementById("galleryCaption");
      img.src = photos[photoIndex].src;
      caption.textContent = photos[photoIndex].caption || "";
      buildDots();
    }

    function nextPhoto() {
      photoIndex = (photoIndex + 1) % photos.length;
      renderPhoto();
    }

    function prevPhoto() {
      photoIndex = (photoIndex - 1 + photos.length) % photos.length;
      renderPhoto();
    }

    function goToPhoto(i) {
      photoIndex = i;
      renderPhoto();
    }

    // Option 4: Hidden love notes (Easter eggs)
    const easterNotes = [
      "Mi amor, you are my favorite part of every day.",
      "If you found this, you get an extra kiss. Come claim it.",
      "Thank you for being you. I love you, Mari.",
      "You make our home feel like home.",
      "I would pick you in every lifetime."
    ];

    function showEasterEgg(source) {
      let msg = "";
      if (source === "title") {
        msg = "Mi amor, you are my favorite. Always.";
      } else if (source === "fireplace") {
        msg = "Warm fire, warm heart. That is you.";
      } else {
        msg = easterNotes[Math.floor(Math.random() * easterNotes.length)];
      }

      openModal(
        "A little secret ‚ù§Ô∏è",
        msg
      );
    }

    // Option 6: Hug button
    function hug() {
      openModal(
        "Come here ü§ç",
        "Big hug. No talking needed. Just you and me. I love you, mi amor."
      );
    }

    // Existing flow
    function unlock() {
      const val = (document.getElementById("code").value || "").trim().toUpperCase();
      const status = document.getElementById("status");

      if (val === SECRET) {
        document.getElementById("content").classList.remove("hidden");
        document.querySelector(".lockbox").style.display = "none";
        status.innerHTML = '<span class="ok">Unlocked. Movie night awaits, mi amor.</span>';
      } else {
        status.innerHTML = '<span class="err">Not quite. Try again.</span>';
      }
    }

    function hint() {
      document.getElementById("status").textContent = "Hint: look at the movie ticket.";
    }

    function startNight() {
      openModal(
        "Movie night begins ‚ù§Ô∏è",
        "Mi amor, get comfy. I‚Äôve got everything handled. All you have to do is relax and enjoy."
      );

      // Turn music on automatically when she clicks Start Movie Night
      if (!musicOn) toggleMusic();
    }

    function openModal(title, text) {
      modalTitle.textContent = title;
      modalText.textContent = text;
      modal.classList.add("show");
      modal.setAttribute("aria-hidden", "false");
    }

    function closeModal() {
      modal.classList.remove("show");
      modal.setAttribute("aria-hidden", "true");
    }

    function toggleMusic() {
      if (!musicOn) {
        bgm.volume = 0.45;
        bgm.play().then(() => {
          musicOn = true;
          musicBtn.textContent = "Music: On";
          showToast("Music on.");
        }).catch(() => {
          musicOn = false;
          musicBtn.textContent = "Music: Off";
          showToast("Music file not found or blocked.");
        });
      } else {
        bgm.pause();
        musicOn = false;
        musicBtn.textContent = "Music: Off";
        showToast("Music off.");
      }
    }

    function showToast(text) {
      toast.textContent = text;
      toast.classList.add("show");
      window.clearTimeout(window.__toastTimer);
      window.__toastTimer = window.setTimeout(() => {
        toast.classList.remove("show");
      }, 1700);
    }

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") closeModal();
      if (e.key === "ArrowRight") nextPhoto();
      if (e.key === "ArrowLeft") prevPhoto();
    });

    // Initialize interactive parts
    renderChecklist();
    renderPhoto();
  </script>

</body>
</html>
